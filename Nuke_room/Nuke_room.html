<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Precise Camera Control in A-Frame</title>
    <script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>
    <link rel="stylesheet" href="Nuke_room.css">
  </head>
  <body>

    <a-scene id="scene">
      <a-assets>
        <a-asset-item id="nuke" src="nuke_model.glb"></a-asset-item>
        <a-asset id="snow_texture" src="snow texture.jpg"></a-asset>
        <a-asset id="floor_texture" src="floor texture.jpg"></a-asset>
        <a-asset id="wall_texture" src="wall texture.jpg"></a-asset>
        <a-asset id="metalic_texture" src="metalic texture.jpg"></a-asset>
        <a-asset id="ceiling_texture" src="ceiling texture.png"></a-asset>
        <a-asset id="wood_texture" src="wood texture.jpg"></a-asset>
      </a-assets>

      <a-entity id="camera" camera position="0 2.2 0" 
                look-controls="pointerLockEnabled: true"
                wasd-controls="acceleration: 50; fly: false">
                <a-cursor></a-cursor>
      </a-entity>

      <a-plane src="#snow_texture" id="ground" scale="1000 1000 1000" position="0 0 0" rotation="90 0 0" side="double"></a-plane>

      <!-- My nuke -->
      <a-entity id="my_nuke" gltf-model="#nuke" position="0 1 -20" scale="0 0 0" rotation="0 0 90"></a-entity>

      <!-- floor -->
      <a-box src="#floor_texture" position="0 0 0" scale="20 0.2 30" rotation="0 0 0" color="#ccccff"></a-box>

      <!-- left wall -->
      <a-box src="#wall_texture" position="-10 2.5 0" scale="1 5 30" rotation="0 0 0" color="#ccccff"></a-box>

      <!-- right wall -->
      <a-box src="#wall_texture" position="10 2.5 0" scale="1 5 30" rotation="0 0 0" color="#ccccff"></a-box>
      
      <!-- front wall -->
      <a-box src="#wall_texture" position="0 4.5 -15" scale="12 1 1" rotation="0 0 0" color="#ccccff"></a-box>
      <a-box src="#wall_texture" position="-8 2.5 -15" scale="4 5 1" rotation="0 0 0" color="#ccccff"></a-box>
      <a-box src="#wall_texture" position="0 0.5 -15" scale="12 1 1" rotation="0 0 0" color="#ccccff"></a-box>
      <a-box src="#wall_texture" position="8 2.5 -15" scale="4 5 1" rotation="0 0 0" color="#ccccff"></a-box>

      <!-- back wall -->
      <a-box src="#wall_texture" position="0 4.5 15" scale="12 1 1" rotation="0 0 0" color="#ccccff"></a-box>
      <a-box src="#wall_texture" position="-8 2.5 15" scale="4 5 1" rotation="0 0 0" color="#ccccff"></a-box>
      <a-box src="#wall_texture" position="8 2.5 15" scale="4 5 1" rotation="0 0 0" color="#ccccff"></a-box>


      <!-- ceiling -->
      <a-box src="#ceiling_texture" position="0 5 0" scale="20 0.2 30" rotation="0 0 0" color="#ccccff"></a-box>

      <!-- button -->
      <a-cylinder src="#metalic_texture" position="0 0.6 -11" radius="0.3" scale="1 1.2 1" rotation="0 180 0" color="#ccccff"></a-cylinder>
      <a-cylinder id="button" src="#metalic_texture" position="0 0.7 -11" radius="0.2" scale="1 1.1 1" rotation="0 180 0" color="#ff0000"></a-cylinder>

      <!-- corner nukes -->
      <a-entity gltf-model="#nuke" position="-8.9 2 -13.9" scale="0.5 0.5 0.5" rotation="0 0 90"></a-entity>
      <a-entity gltf-model="#nuke" position="8.9 2 -13.9" scale="0.5 0.5 0.5" rotation="0 0 90"></a-entity>

      <!-- signs -->
      <a-box src="#ceiling_texture" position="-8 0.5 3" scale="1 1 1" rotation="0 90 0"></a-box>
      <a-box src="#wood_texture" position="-6 1 3" scale="1.3 0.8 0.1" rotation="0 90 0"></a-box>
      <a-cylinder src="#wood_texture" position="-6 0.5 3" radius="0.05" scale="1 1.2 1" rotation="0 0 0"></a-cylinder>
      <a-entity gltf-model="#nuke" position="-8 1.4 3" scale="0.11 0.11 0.11" rotation="0 0 90"></a-entity>
      <a-entity text="value: Coreia do Norte\n Nukes: 20; align: center; width: 2; color: black" position="-5.9 1 3" rotation="0 90 0"></a-entity>

      <a-box src="#wood_texture" position="-6 1 6" scale="1.3 0.8 0.1" rotation="0 90 0"></a-box>
      <a-cylinder src="#wood_texture" position="-6 0.5 6" radius="0.05" scale="1 1.2 1" rotation="0 0 0"></a-cylinder>
      <a-entity gltf-model="#nuke" position="-8 0.98 6" scale="0.23 0.23 0.23" rotation="0 0 90"></a-entity>
      <a-entity text="value: Israel\n Nukes: 80; align: center; width: 2; color: black" position="-5.9 1 6" rotation="0 90 0"></a-entity>

      <a-box src="#wood_texture" position="-6 1 9" scale="1.3 0.8 0.1" rotation="0 90 0"></a-box>
      <a-cylinder src="#wood_texture" position="-6 0.5 9" radius="0.05" scale="1 1.2 1" rotation="0 0 0"></a-cylinder>
      <a-entity gltf-model="#nuke" position="-8 1.2 9" scale="0.29 0.29 0.29" rotation="0 0 90"></a-entity>
      <a-entity text="value: India\n Nukes: 130; align: center; width: 2; color: black" position="-5.9 1 9" rotation="0 90 0"></a-entity>

      <a-box src="#wood_texture" position="-6 1 12" scale="1.3 0.8 0.1" rotation="0 90 0"></a-box>
      <a-cylinder src="#wood_texture" position="-6 0.5 12" radius="0.05" scale="1 1.2 1" rotation="0 0 0"></a-cylinder>
      <a-entity gltf-model="#nuke" position="-8 1.24 12" scale="0.30 0.30 0.30" rotation="0 0 90"></a-entity>
      <a-entity text="value: Paquistao\n Nukes: 140; align: center; width: 2; color: black" position="-5.9 1 12" rotation="0 90 0"></a-entity>

      <a-box src="#wood_texture" position="6 1 6" scale="1.3 0.8 0.1" rotation="0 90 0"></a-box>
      <a-cylinder src="#wood_texture" position="6 0.5 6" radius="0.05" scale="1 1.2 1" rotation="0 0 0"></a-cylinder>
      <a-entity gltf-model="#nuke" position="8 1.5 6" scale="0.37 0.37 0.37" rotation="0 0 90"></a-entity>
      <a-entity text="value: Reino Unido\n Nukes: 215; align: center; width: 2; color: black" position="5.9 1 6" rotation="0 -90 0"></a-entity>

      <a-box src="#wood_texture" position="6 1 9" scale="1.3 0.8 0.1" rotation="0 90 0"></a-box>
      <a-cylinder src="#wood_texture" position="6 0.5 9" radius="0.05" scale="1 1.2 1" rotation="0 0 0"></a-cylinder>
      <a-entity gltf-model="#nuke" position="8 1.7 9" scale="0.41 0.41 0.41" rotation="0 0 90"></a-entity>
      <a-entity text="value: China\n Nukes: 260; align: center; width: 2; color: black" position="5.9 1 9" rotation="0 -90 0"></a-entity>

      <a-box src="#wood_texture" position="6 1 12" scale="1.3 0.8 0.1" rotation="0 90 0"></a-box>
      <a-cylinder src="#wood_texture" position="6 0.5 12" radius="0.05" scale="1 1.2 1" rotation="0 0 0"></a-cylinder>
      <a-entity gltf-model="#nuke" position="8 1.8 12" scale="0.44 0.44 0.44" rotation="0 0 90"></a-entity>
      <a-entity text="value: Franca\n Nukes: 300; align: center; width: 2; color: black" position="5.9 1 12" rotation="0 -90 0"></a-entity>

      <a-box src="#wood_texture" position="-3 1 17" scale="1.3 0.8 0.1" rotation="0 -45 0"></a-box>
      <a-cylinder src="#wood_texture" position="-3 0.5 17" radius="0.05" scale="1 1.2 1" rotation="0 0 0"></a-cylinder>
      <a-entity gltf-model="#nuke" position="-5 7.7 20" scale="2.02 2.02 2.02" rotation="0 0 90"></a-entity>
      <a-entity text="value: Estados Unidos\n Nukes: 6500; align: center; width: 2; color: black" position="-3 1 16.9" rotation="0 135 0"></a-entity>

      <a-box src="#wood_texture" position="3 1 17" scale="1.3 0.8 0.1" rotation="0 45 0"></a-box>
      <a-cylinder src="#wood_texture" position="3 0.5 17" radius="0.05" scale="1 1.2 1" rotation="0 0 0"></a-cylinder>
      <a-entity gltf-model="#nuke" position="5 7.8 20" scale="2.07 2.07 2.07" rotation="0 0 90"></a-entity>
      <a-entity text="value: Russia\n Nukes: 6850; align: center; width: 2; color: black" position="3 1 16.9" rotation="0 225 0"></a-entity>


      <a-light type="point" position="-9 3.5 -14" color="#ffffff" intensity="0.4" distance="30" decay="2"></a-light>
      <a-light type="point" position="-9 3.5 14" color="#ffffff" intensity="0.4" distance="30" decay="2"></a-light>
      <a-light type="point" position="9 3.5 -14" color="#ffffff" intensity="0.4" distance="30" decay="2"></a-light>
      <a-light type="point" position="9 3.5 14" color="#ffffff" intensity="0.4" distance="30" decay="2"></a-light>
      <a-light type="point" position="0 3.5 0" color="#ffffff" intensity="0.4" distance="50" decay="2"></a-light>

      <a-light type="ambient" color="#ffffff" intensity="0.7"></a-light>
      <a-sky color="#cccccc"></a-sky>
    </a-scene>
    

  <img id="country-flag" src="#country-flag" alt="">

  <!-- Dropdown list to select country -->
  <select id="country-select">
    <option value="my_arsenal">O meu arsenal</option>
    <option value="escala">Escala</option>
    <option value="israel">Israel</option>
    <option value="coreiadonorte">Coreia do Norte</option>
    <option value="paquistao">Paquistao</option>
    <option value="india">India</option>
    <option value="china">China</option>
    <option value="franca">Franca</option>
    <option value="reinounido">Reino Unido</option>
    <option value="russia">Russia</option>
    <option value="estadosunidos">Estados Unidos</option>
  </select>

>
  <div id="info-box" style="background-color: grey; padding: 10px;">
      <h1>Poder explosivo total: <span id="tons"></span> toneladas</h1> <br>
      <h1>Total de armas nucleares:  <span id="amount"></span></h1>
  </div>

  <script>
      // Map of countries to number of nukes

      var box = document.querySelector('#button');
        box.addEventListener('click', () => {
          nukesByCountry["my_arsenal"] ++
          document.getElementById("my_nuke").setAttribute('scale', {x: Math.sqrt(nukesByCountry["my_arsenal"]) / 40, y: Math.sqrt(nukesByCountry["my_arsenal"]) / 40, z: Math.sqrt(nukesByCountry["my_arsenal"]) / 40});
          document.getElementById("my_nuke").setAttribute('position', {x: 0, y: 0.3 + Math.sqrt(nukesByCountry["my_arsenal"]) / 80, z: -20 - Math.sqrt(nukesByCountry["my_arsenal"]) / -80});
          updateNuke()
        });

      
      var nukesByCountry = {
          'israel': 80,
          'coreiadonorte': 20,
          'paquistao': 140,
          'india': 130,
          'china': 260,
          'franca': 300,
          'reinounido': 215,
          'russia': 6850,
          'estadosunidos': 6500,
          'my_arsenal': 0,
          'escala': 1,
      };

      var nukeModel = document.querySelector('#nuke-model');
      var countrySelect = document.querySelector('#country-select');
      var tonsText = document.querySelector('#tons');
      var amountText = document.querySelector('#amount');

      function updateNuke() {

          var currentCountry = countrySelect.value;

          var numberOfNukes = nukesByCountry[currentCountry];

          var scale = Math.log(numberOfNukes) / Math.log(10);

          var tons = numberOfNukes * 500000;
          var tonsInExponential = tons.toExponential().split('e');
          tonsText.innerText = `${tonsInExponential[0]} x 10^${tonsInExponential[1]}`;
          amountText.innerText = numberOfNukes;
      }

      countrySelect.addEventListener('change', updateNuke);
      updateNuke();
  </script>


  </body>
</html>
